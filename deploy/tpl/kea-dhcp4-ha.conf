{
    "Dhcp4": {
        "subnet4": [
            {
                "id": 1,
                "interface": "${IMAGE__SERVICE__INTERFACE}",
                "subnet": "192.168.1.0/24",
                "pools": [
                    {
                        "pool": "192.168.1.10-192.168.1.254"
                    }
                ]
            }
        ],
        "interfaces-config": {
            "interfaces": [
                "${IMAGE__SERVICE__INTERFACE}"
            ],
            "service-sockets-max-retries": 5,
            "service-sockets-retry-wait-time": 10000,
            "service-sockets-require-all": false
        },
        "control-socket": {
            "socket-type": "unix",
            "socket-name": "/run/kea/control_socket_4"
        },
        "renew-timer": 900,
        "rebind-timer": 1800,
        "valid-lifetime": 3600,
        "loggers": [
            {
                "name": "kea-dhcp4.dhcp4",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "stdout"
                    }
                ]
            },
            {
                "name": "kea-dhcp4",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.log",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.dhcp4",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.dhcp4",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.dhcpsrv",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.dhcpsrv",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.hooks",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.hooks",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.ha-hooks",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.ha-hooks",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.hosts",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.hosts",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.leases",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.leases",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            },
            {
                "name": "kea-dhcp4.packets",
                "severity": "${KEA__LOGGING__SEVERITY}",
                "output_options": [
                    {
                        "output": "/var/log/kea/kea-dhcp4.packets",
                        "flush": true,
                        "maxsize": 1048576,
                        "maxver": 10
                    }
                ]
            }
        ],
        "lease-database": {
            "type": "${KEA__BACKEND__TYPE}",
            "host": "${KEA__BACKEND__OPTS__HOST}",
            "port": ${KEA__BACKEND__OPTS__PORT},
            "name": "${KEA__BACKEND__OPTS__NAME}",
            "user": "${KEA__BACKEND__OPTS__USERNAME}",
            "password": "${KEA__BACKEND__OPTS__PASSWORD}",
            "max-reconnect-tries": 5,
            "reconnect-wait-time": 5000,
            "on-fail": "serve-retry-exit"
        },
        "hosts-database": {
            "type": "${KEA__BACKEND__TYPE}",
            "host": "${KEA__BACKEND__OPTS__HOST}",
            "port": ${KEA__BACKEND__OPTS__PORT},
            "name": "${KEA__BACKEND__OPTS__NAME}",
            "user": "${KEA__BACKEND__OPTS__USERNAME}",
            "password": "${KEA__BACKEND__OPTS__PASSWORD}",
            "max-reconnect-tries": 5,
            "reconnect-wait-time": 5000,
            "on-fail": "serve-retry-exit"
        },
        "hooks-libraries": [
            {
                "library": "/usr/lib/kea/hooks/libdhcp_lease_cmds.so"
            },
            {
                "library": "/usr/lib/kea/hooks/libdhcp_ha.so",
                "parameters": {
                    "high-availability": [ {
                        "this-server-name": "${KEA__HA__NAME}",
                        "mode": "load-balancing",
                        "heartbeat-delay": 5000,
                        "max-response-delay": 10000,
                        "max-ack-delay": 5000,
                        "max-unacked-clients": 2,
                        "sync-timeout": 60000,
                        "peers": [
                            {
                                "name": "node1",
                                "url": "http://${SERVICE__NETWORKING__MGMT__IPV4__ADDRESS}:${SERVICE__PORTS__TCP__HTTP}/",
                                "role": "primary"
                            },
                            {
                                "name": "node2",
                                "url": "http://${KEA__HA__PEER__ADDRESS}:${SERVICE__PORTS__TCP__HTTP}/",
                                "role": "secondary"
                            }
                        ]
                    } ]
                }
            }
        ]
    }
}